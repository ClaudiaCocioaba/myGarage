{% extends "garage.html" %}

{% block head %}
	  {% load staticfiles %}
	  <link rel="stylesheet" href="//code.jquery.com/ui/1.11.2/themes/smoothness/jquery-ui.css">
      <script src="//code.jquery.com/jquery-1.10.2.js"></script>
      <script src="//code.jquery.com/ui/1.11.2/jquery-ui.js"></script>
      
	   <script type="text/javascript">
		   $(document).ready(function () {
		        var hrefValue = "refuellings";
		        setItemMenuActive(hrefValue);		        
		        
		        $( "tbody tr:odd" ).css( "background-color", "#F0FFD6" );		        
		        setColumnsWidth();  		        
		              
			    
		   });	
		   
		   validationsArray = [];
		   digitsOnlyValidationArray = ['id_current_mileage', 'id_sum_refuelled', 'id_quantity_refuelled'];
		   					
		   function checkAllRows(currentElement) {				
				var checkedProp = $(currentElement).prop('checked');
				
				if(checkedProp) {
					//select all rows
					$('.checkRow').prop('checked', true);
				}
				else {
					//deselect all rows
					$('.checkRow').prop('checked', false);
			 	}				
		   }
		   
		   function deleteRows() {
		   		//get the selected rows
		   		// send the selected rows to the server in an array
		   		
		   		
		   }
			
			
		   	   
	   </script>
{% endblock %}


{% block title %}Refuellings{% endblock %}

{% block operations %}
	{% if refuellings %}			
	        <table class="records">	
		        <thead>
			        <th>Refuel date</th>
			        <th>Current mileage</th>
			        <th>Sum refuelled</th>
			        <th>Quantity refuelled</th>  
			        <th><input type="checkbox" id="checkHead" onclick="checkAllRows(this)" name="checkHead" value="allRows"></th>
		        </thead>   
	        </table>   
	        <div class="tableDiv" >
		        <table class="records">
	    		{% for record in refuellings %}
		    		<tbody>
			    		<tr>
			    		    <td>{{ record.refuel_date }}</td>
			    		    <td>{{ record.current_mileage }}</td>
			    			<td>{{ record.sum_refuelled }}</td>
			    			<td>{{ record.quantity_refuelled }}</td>    
			    			<td><input type="checkbox" class="checkRow" name="checkRow" value="selectedRow"></td>	
			    		</tr>
		    		</tbody>
	    		{% endfor %}  
	    		</table>
    		</div>
    	{% else %}	
    		<p>no refuellings for this car</p>   		  
   		{% endif %}  
   		
   	 <div id="newRow">
   	 <form method="post" action="" onsubmit="return validateTempFields()">
   	 {% csrf_token %}
   	 <span class='addNewRecordTip'> </span>
   	 <table id="tempTable">
   	 	<thead>
   	 		<th>Refuel date</th>
   	 		<th>Current mileage</th>
	        <th>Sum refuelled</th>
	        <th>Quantity refuelled</th> 
   	 	</thead>
   	 	<tbody>
   	 		<tr></tr>
   	 	</tbody>   	 	   	 
   	 </table>
   	 <div id="newRowBtns">
	   	 <input type="submit" class="btnNewRow" value="Add"/>
	   	 <input type="button" id="cancelNewRecord" class="btnNewRow" value="Cancel" onclick="closeNewRow()">
	   	 <!-- <input type="button" id="test" class="btnNewRow" value="test" onclick="validateTempFields()">
	   	 -->
   	 </div>
   	 </form>
   	 </div>	  
   	 
   	 <div id="submenu">
	 	<input type="button" id="addRecord" onclick="addNewRow()" alt="Add new record"/>
	 	<span class='buttonsAltText'>Add new record</span>
	 	<input type="button" id="deleteRecords" onclick="deleteRows()" alt="Delete record"/>
	 	<span class='buttonsAltText'>Delete selected records</span>
	 	
	 </div>
  		

{% endblock %}	


	


{% block footer %}
{% endblock %}